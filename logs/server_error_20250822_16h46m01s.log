2025-08-22 16:48:34 - back_end.server - ERROR - Error during chat: 'NoneType' object has no attribute 'get'
Traceback (most recent call last):
  File "C:\Users\z0054unn\Documents\Siemens-GitLab\Third-party\third-party-clearance\back_end\server.py", line 212, in chat
    status, updated_shared, reply = chat_service.process_user_input(
                                    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        session["shared"],
        ^^^^^^^^^^^^^^^^^^
        chat_message.message,
        ^^^^^^^^^^^^^^^^^^^^^
        status
        ^^^^^^
    )
    ^
  File "C:\Users\z0054unn\Documents\Siemens-GitLab\Third-party\third-party-clearance\back_end\services\chat_service.py", line 47, in process_user_input
    updated_status = self.chat_flow.process(content).value
                     ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\z0054unn\Documents\Siemens-GitLab\Third-party\third-party-clearance\back_end\services\chat_flow.py", line 148, in process
    event = handler.handle(context)
  File "C:\Users\z0054unn\Documents\Siemens-GitLab\Third-party\third-party-clearance\back_end\services\state_handlers\base_handler.py", line 139, in handle
    if self.check_all_subtasks_completed(context):
       ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\z0054unn\Documents\Siemens-GitLab\Third-party\third-party-clearance\back_end\services\state_handlers\base_handler.py", line 164, in check_all_subtasks_completed
    return all(self.is_subtask_completed(context, task_id) for task_id in self.subtasks)
  File "C:\Users\z0054unn\Documents\Siemens-GitLab\Third-party\third-party-clearance\back_end\services\state_handlers\base_handler.py", line 164, in <genexpr>
    return all(self.is_subtask_completed(context, task_id) for task_id in self.subtasks)
               ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^
  File "C:\Users\z0054unn\Documents\Siemens-GitLab\Third-party\third-party-clearance\back_end\services\state_handlers\object_handler.py", line 102, in is_subtask_completed
    components = get_items_from_context(context, ItemType.MAINLICENSE)
  File "C:\Users\z0054unn\Documents\Siemens-GitLab\Third-party\third-party-clearance\back_end\items_utils\item_utils.py", line 17, in get_items_from_context
    return context.get("shared", {}).get(items_key, [])
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
2025-08-22 16:48:34 - utils.tools - ERROR - Error CHAT_ERROR: Error during contract analysis: 'NoneType' object has no attribute 'get'
2025-08-22 16:56:43 - utils.tools - ERROR - Attempt 1 to get valid JSON response
2025-08-22 16:57:17 - back_end.server - ERROR - Error during chat: 'NoneType' object has no attribute 'get'
Traceback (most recent call last):
  File "C:\Users\z0054unn\Documents\Siemens-GitLab\Third-party\third-party-clearance\back_end\server.py", line 212, in chat
    status, updated_shared, reply = chat_service.process_user_input(
                                    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        session["shared"],
        ^^^^^^^^^^^^^^^^^^
        chat_message.message,
        ^^^^^^^^^^^^^^^^^^^^^
        status
        ^^^^^^
    )
    ^
  File "C:\Users\z0054unn\Documents\Siemens-GitLab\Third-party\third-party-clearance\back_end\services\chat_service.py", line 47, in process_user_input
    updated_status = self.chat_flow.process(content).value
                     ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\z0054unn\Documents\Siemens-GitLab\Third-party\third-party-clearance\back_end\services\chat_flow.py", line 148, in process
    event = handler.handle(context)
  File "C:\Users\z0054unn\Documents\Siemens-GitLab\Third-party\third-party-clearance\back_end\services\state_handlers\base_handler.py", line 139, in handle
    if self.check_all_subtasks_completed(context):
       ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\z0054unn\Documents\Siemens-GitLab\Third-party\third-party-clearance\back_end\services\state_handlers\base_handler.py", line 164, in check_all_subtasks_completed
    return all(self.is_subtask_completed(context, task_id) for task_id in self.subtasks)
  File "C:\Users\z0054unn\Documents\Siemens-GitLab\Third-party\third-party-clearance\back_end\services\state_handlers\base_handler.py", line 164, in <genexpr>
    return all(self.is_subtask_completed(context, task_id) for task_id in self.subtasks)
               ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^
  File "C:\Users\z0054unn\Documents\Siemens-GitLab\Third-party\third-party-clearance\back_end\services\state_handlers\object_handler.py", line 102, in is_subtask_completed
    components = get_items_from_context(context, ItemType.MAINLICENSE)
  File "C:\Users\z0054unn\Documents\Siemens-GitLab\Third-party\third-party-clearance\back_end\items_utils\item_utils.py", line 17, in get_items_from_context
    return context.get("shared", {}).get(items_key, [])
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
2025-08-22 16:57:17 - utils.tools - ERROR - Error CHAT_ERROR: Error during contract analysis: 'NoneType' object has no attribute 'get'
